function initialize(){pageNo=$.query.get("pageNo"),pageId=$.query.get("pageId"),diId=$.query.get("diId"),mode=$.query.get("mode"),ver_no=$.query.get("ver_no"),curr_ver=$.query.get("curr_ver"),folder_name=$.query.get("folder_name"),verId=$.query.get("verId"),locale=$.query.get("locale"),session=$.query.get("session"),session?$.ajax({type:"POST",url:"/CAPS/UrlEncryptionServlet?session="+session,dataType:"text",success:function(a){var b=a.split(",");$(b).each(requiredParamsSetter),playerSetter()},error:function(a){}}):playerSetter()}function playerSetter(){playerMode=mode,window.diId=diId,window.playerManager=new PlayerManager,window.player=new PlayerView({model:window.playerManager}),loadManifest(),createSummaryAudioPlayer(),locale&&$("#btnHelp").attr("href","help.html?locale="+locale)}function loadManifest(){function a(){var a=new BatchLoader;$(a).bind(BatchLoader.LOAD_COMPLETE,b),a.loadFiles([d])}function b(a){var b={};b=0==isDownloadePackage?CollectionUtils.findElementWithProperty("url",d,a.fileContents).data:$.parseXML(manifest),c(b)}function c(a){function b(a){var b=new Glossaries;$(d.glossaryFiles).each(function(c){var d=[];d=1==isDownloadePackage?$.parseXML(window["glossary"+(c+1)]):a.fileContents,$(d).each(function(){var a={};a=1==isDownloadePackage?this:this.data;var c=$(a).find("Glossary > GlossaryItem");$(c).each(function(){var a=$(this).find("Word").text(),c=new Glossary,d=new Words,e=[],e=$(this).find("word");$(e).each(function(){var b=new Word,c={};c.keyWord=$(this).find("keyword").text(),c.plainTextKeyWord=$("<span />").html(c.keyWord).text(),c.desc=$(this).find("desc").text(),c.url=$(this).find("url").text(),c.letter=a,b.set(c),d.add(b)}),c.set({letter:a,Words:d}),b.add(c)})})}),d.learningObjective.set({glossaries:b}),setManifestData(d)}function c(a){var b=[];b=1==isDownloadePackage?$.parseXML(logoJs):a.fileContents,$(b).each(function(){var a={};a=1==isDownloadePackage?this:this.data;var b=$(a).find("copyrightInfo");$(b).each(function(a,b){var c=$(b).find("logopath").text();c&&($("#titleWrapper div.toolBarButtontip").after('<div class="logoImage" id="logoImage"> </div>'),$(".logoImage").append('<img src="'+c+'"/>'));var d=$(b).find("copyrighttext").text(),e=$("#pageLoader")[0].contentWindow.document;if(d){var f=$('<div id="copyrightContainer"><div id="copyrightWrapper"></div></div>');$("#playerContainer").append(f),$("#copyrightWrapper").append("<p>"+d+"</p>"),$("#playerContainer").addClass("removeCopyRight"),$(e).find("#pageContainer").addClass("removeCopyRight");var g=$("#toolBarContainer").height()+20;$("#toolBarContainer").css("height",g),isCopyRight=!0}})})}var d=ManifestAdapter.parseXML(a);if(locale=d.locale,maxtries=d.maxtries,!isDownloadePackage){var e=d.themes;if(e&&e.length){var f="../../theme",g=0,h=window.parent.$.query.get("defTheme");if(defaultTheme=d.playerTheme.attributes.name,h)for(;g<e.length;){if(h.toLowerCase()==e[g].name.toLowerCase()){defaultTheme=e[g].name,f=e[g].path;break}g++}$("#titleWrapper div.toolBarButtontip").after('<div class="themes_content" style="display:none"> </div>'),$(".themes_content").append("<span rel='localize[Player]'></span><select id='themes_list'><option value='"+f+"'>"+defaultTheme+"</option></select>"),$("head").append('<link id="themeSwitcherId" type="text/css" rel="stylesheet" href=""/>'),$("head").append('<link id="themeDefaultId" type="text/css" rel="stylesheet" href=""/>'),$(e).each(function(a,b){if($.trim(b.name).toLowerCase()!=defaultTheme.toLowerCase())$("#themes_list").append("<option value='"+b.path+"'>"+b.name+"</option>");else if($.trim(b.name).toLowerCase()==defaultTheme.toLowerCase()){var c=$("#themes_list").find("option")[0];$(c).text(b.name),$(c).attr("value",b.path)}}),themeChanged=!0,window.updateTheme(),$("#themes_list").change(function(){themeChanged=!0,$("body").fadeOut(500).fadeIn(500),setTimeout(function(){window.updateTheme()},500)})}var i=d.pageStyles;i&&i.length&&($("#titleWrapper div.toolBarButtontip").after('<div class="pageStyles"> </div>'),$(".pageStyles").append("<select id='pageStyles_list'></select>"),$(i).each(function(a,b){$("#pageStyles_list").append("<option value='"+b.path+"'>"+b.name+"</option>")}));var j=d.localeStyles;j&&j.length&&($("#titleWrapper div.toolBarButtontip").after('<div class="localeStyle"> </div>'),$(".localeStyle").append("<select id='localeStyle_list'></select>"),$(j).each(function(a,b){$("#localeStyle_list").append("<option value='"+b.localeName+"'>"+b.name+"</option>")}))}if(d.glossaryFiles.length)if(1==isDownloadePackage)Modernizr.load({nope:d.glossaryFiles,complete:function(){b("")}});else{var k=new BatchLoader;$(k).bind(BatchLoader.LOAD_COMPLETE,b),k.loadFiles(d.glossaryFiles)}else setManifestData(d);if(d.copyRightXML)if(1==isDownloadePackage)Modernizr.load({nope:d.copyRightXML,complete:function(){c("")}});else{var l=new BatchLoader;$(l).bind(BatchLoader.LOAD_COMPLETE,c),l.loadFiles([d.copyRightXML])}}var d="";mode?(summaryAudioSolutionPriority="html,flash",isDownloadePackage=!1,d="/CAPS/AssetUploadServlet?contentType=manifest&diId="+diId+"&ver_no="+ver_no+"&curr_ver="+curr_ver+"&folder_name="+folder_name+"&verId="+verId+"&random="+1e3*Math.random(),a()):(summaryAudioSolutionPriority="html,flash",d="manifest.js",isServiceAccessAllowed=!1,Modernizr.load({nope:d,complete:function(){b(null)}})),window.updateTheme=function(){if(1==themeChanged){var a=$("#themes_list").val();$("#themeSwitcherId").attr("href",a+"/playerTheme.css"),$("#themeDefaultId").attr("href",a+"/theme.css");var b=a.split("/").pop();if("theme"==b)b=defaultTheme;else{var c=b.toUpperCase().replace(" ","_");b=ThemeVariation[c]}var d=new PlayerTheme;d.set({name:b}),playerManager.set({packageTheme:d});try{playerManager.getTheme().getName()==ThemeVariation.ORANGEADE&&(Modernizr.load({nope:"http://fast.fonts.com/jsapi/6e8f651c-046e-4690-9449-dee278af2d62.js",complete:function(){}}),window.frames[0].Modernizr.load({nope:"http://fast.fonts.com/jsapi/6e8f651c-046e-4690-9449-dee278af2d62.js",complete:function(){}})),window.frames[0].$("#templatetheme").attr("href",a+"/commonTemplatesthemeStyle.css")}catch(e){window.console}try{$("#pageLoader")[0].contentWindow.ThemeConfig.currentTheme=playerManager.getTheme().getName(),$("#pageLoader")[0].contentWindow.themeInstructionChanger(),$("#pageLoader")[0].contentWindow.themeBehavior()}catch(f){}}}}function setManifestData(a){function b(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}playerManager.set({PackageType:a.PackageType}),playerManager.set({totalNoOfAssessmetQustions:a.numberOfAssesmentPage}),playerManager.set({isInAssessmentMode:a.isAssessmentPackage}),playerManager.set({isPageShuffle:a.pageShuffle}),playerManager.set({isSummaryScreenShow:a.isSummaryScreen}),playerManager.set({program:a.program}),playerManager.set({course:a.course}),playerManager.set({learningObjective:a.learningObjective}),playerManager.set({packageTheme:a.playerTheme}),playerManager.set({pageStyles:a.pageStyles}),pageId?window.player.goToPageByPageId(pageId):pageNo&&window.player.goToPageBySequence(pageNo);var c=jQuery.Event(PageDataHandler.DATA_LOADED);$(document).trigger(c),ClientInformation.isMobileDevice()||"Aqua"!=playerManager.getTheme().getName()?$("#fullscreen").css("display","none"):$("#fullscreen").bind("click",function(){$(this).toggleClass("zoomInView"),b()})}function createSummaryAudioPlayer(){var a=AudioPlayerFactory.createPlayer("summaryAudio","Summary Audio","summaryAudioWrapper");$("#summaryAudioContainer").append(a),$("#summaryAudio").jPlayer({ready:function(){$("#summaryAudio").data("isReady",!0),$("#summaryAudioWrapper a").enterEnabled(),$("#summaryAudioWrapper a").bind("enter",function(){$(this).click()}),$("#summaryAudio").jPlayer("clearMedia"),$("#summaryAudioWrapper .jp-play").after('<div class="toolBarButtontip"><p rel="localize[play]">Play</p></div>'),$("#summaryAudioWrapper .jp-pause").after('<div class="toolBarButtontip"><p rel="localize[pause]">Pause</p></div>'),ClientInformation.isMobileDevice()||($("#summaryAudioWrapper .jp-play").tooltip({relative:!0,position:"top center",events:{def:"mouseover, mouseleave mouseup mousedownoutside keypressoutside",tooltip:"mousedown mouseover, mouseleave mouseup enter"}}).dynamic(),$("#summaryAudioWrapper .jp-pause").tooltip({relative:!0,position:"top center",events:{def:"mouseover, mouseleave mouseup mousedownoutside keypressoutside",tooltip:"mousedown mouseover, mouseleave mouseup enter"}}).dynamic())},play:function(){window.player.onSummaryAudioPlay()},pause:function(){},ended:function(){$("#summaryAudio").jPlayer("stop")},swfPath:"./player.swf",supplied:"mp3,oga",wmode:"window",solution:summaryAudioSolutionPriority,cssSelectorAncestor:"#summaryAudioWrapper",verticalVolume:!0})}function onOrientationChange(){var a=$("#pageLoader").get(0);if(a.contentWindow){var b=a.contentWindow.jQuery.Event("resize");a.contentWindow.$(a.contentWindow).trigger(b)}}function ManifestAdapter(){}function getTitle(a){var b="";return b=$(a).children("title")&&""!=$.trim($(a).children("title").text())?$.trim($(a).children("title").text()):$(a).attr("name")}function getSilodata(a,b,c){var d=new Page,e=$(a).children(":not('title')"),f={};return $(a).attr("name")&&(f.formattedTitle=getTitle(a)),pageSequence=b.pageSequence,f.pageSequence=b.pageSequence&&c?pageSequence+"."+c:b.pageSequence?pageSequence:1,f.subPages=new Pages,$(e).each(function(a){if("LO"==$(this).prop("tagName")){var b=new Page,c={};c.formattedTitle=getTitle(this),c.pageSequence=f.pageSequence+"."+(a+1),c.subPages=new Pages,getLoData(this,c,1).each(function(a){c.subPages.add(a)},this),b.set(c),f.subPages.add(b)}else"CS"==$(this).prop("tagName")&&f.subPages.add(getSilodata(this,f,a+1))}),b||(f.breadcrumb=" "),d.set(f),d}function getLoData(a,b){var c=new Pages,d=$(a).find("Page");return $(d).each(function(a){var d=new Page,e=getNodeData(this,b.pageSequence,a+1);e.breadcrumb=b.breadcrumb+"/"+e.breadcrumb,d.set(e),c.add(d)}),c}function getNodeData(a,b,c){var d={};if(d.title=$(a).find("title").text(),$(a).find("formattedTitle").size()&&$.trim($(a).find("formattedTitle")))try{d.formattedTitle=$(TLFToHTMLAdapter.convertToHTMLString($(a).find("formattedTitle").text())).html()}catch(e){}return d.formattedTitle||(d.formattedTitle=d.title),d.name=$(a).attr("name"),d.sequenceNumber=c,d.pageSequence=b?b+"."+c:c,d.template=$(a).attr("template"),d.breadcrumb=d.formattedTitle,d.topicXMLURL=$(a).attr("XMLsrc"),d.assetReferenceXMLURL=$(a).attr("AssetRefsrc"),d.commentReferenceXMLURL=$(a).attr("bugsXml"),d.isAssessmentType="true"==$(a).attr("isAssessmentPage")?!0:!1,d}function shuffle(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}var isLMSSupported=!1,mode=PreviewModes.PLAYER_PREVIEW_MODE,playerMode="",dropDownMode="bugsVisible",subtypeBugsMaps={},basicBuginfoByBugTypeIdmap={},isServiceAccessAllowed=!0,isDownloadePackage=!0,themeChanged=!1,defaultTheme=ThemeVariation.AQUA,summaryAudioSolutionPriority="flash,html",maxtries,pagesJsonObject={},isCopyRight=!1;$(document).ready(function(){$("#toolBarContainer a, #toolBarContainer button").button(),initialize(),$("#titleWrapper").addClass("authoringTitle"),$("#playerContainer").css("display","block")}),requiredParamsSetter=function(a,b){if("#"!=b)switch(a){case 0:userId=b;break;case 1:diId=b;break;case 2:pageId=b;break;case 3:mode=b,playerMode=mode;break;case 4:break;case 5:break;case 6:break;case 7:clientId=b;break;case 8:-1!=b.indexOf("_")&&(locale=b.slice(1))}},Modernizr.mq("(min-width:0)")||document.write('<script src="scripts/respond.min.js"></script>'),function(){var a,b=this,c=b.Backbone;a="undefined"!=typeof exports?exports:b.Backbone={},a.VERSION="0.5.3";var d=b._;d||"undefined"==typeof require||(d=require("underscore")._);var e=b.jQuery||b.Zepto;a.noConflict=function(){return b.Backbone=c,this},a.emulateHTTP=!1,a.emulateJSON=!1,a.Events={bind:function(a,b,c){var d=this._callbacks||(this._callbacks={});return(d[a]||(d[a]=[])).push([b,c]),this},unbind:function(a,b){var c;if(a){if(c=this._callbacks)if(b){if(c=c[a],!c)return this;for(var d=0,e=c.length;e>d;d++)if(c[d]&&b===c[d][0]){c[d]=null;break}}else c[a]=[]}else this._callbacks={};return this},trigger:function(a){var b,c,d,e,f=2;if(!(c=this._callbacks))return this;for(;f--;)if(b=f?a:"all",b=c[b])for(var g=0,h=b.length;h>g;g++)(d=b[g])?(e=f?Array.prototype.slice.call(arguments,1):arguments,d[0].apply(d[1]||this,e)):(b.splice(g,1),g--,h--);return this}},a.Model=function(a,b){var c;a||(a={}),(c=this.defaults)&&(d.isFunction(c)&&(c=c.call(this)),a=d.extend({},c,a)),this.attributes={},this._escapedAttributes={},this.cid=d.uniqueId("c"),this.set(a,{silent:!0}),this._changed=!1,this._previousAttributes=d.clone(this.attributes),b&&b.collection&&(this.collection=b.collection),this.initialize(a,b)},d.extend(a.Model.prototype,a.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;return(b=this._escapedAttributes[a])?b:(b=this.attributes[a],this._escapedAttributes[a]=(null==b?"":""+b).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"))},has:function(a){return null!=this.attributes[a]},set:function(a,b){if(b||(b={}),!a)return this;a.attributes&&(a=a.attributes);var c=this.attributes,e=this._escapedAttributes;if(!b.silent&&this.validate&&!this._performValidation(a,b))return!1;this.idAttribute in a&&(this.id=a[this.idAttribute]);var f=this._changing;this._changing=!0;for(var g in a){var h=a[g];d.isEqual(c[g],h)||(c[g]=h,delete e[g],this._changed=!0,b.silent||this.trigger("change:"+g,this,h,b))}return!f&&!b.silent&&this._changed&&this.change(b),this._changing=!1,this},unset:function(a,b){if(!(a in this.attributes))return this;b||(b={});var c={};return c[a]=void 0,b.silent||!this.validate||this._performValidation(c,b)?(delete this.attributes[a],delete this._escapedAttributes[a],a==this.idAttribute&&delete this.id,this._changed=!0,b.silent||(this.trigger("change:"+a,this,void 0,b),this.change(b)),this):!1},clear:function(a){a||(a={});var b,c=this.attributes,d={};for(b in c)d[b]=void 0;if(!a.silent&&this.validate&&!this._performValidation(d,a))return!1;if(this.attributes={},this._escapedAttributes={},this._changed=!0,!a.silent){for(b in c)this.trigger("change:"+b,this,void 0,a);this.change(a)}return this},fetch:function(b){b||(b={});var c=this,d=b.success;return b.success=function(a,e,f){return c.set(c.parse(a,f),b)?void(d&&d(c,a)):!1},b.error=s(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},save:function(b,c){if(c||(c={}),b&&!this.set(b,c))return!1;var d=this,e=c.success;c.success=function(a,b,f){return d.set(d.parse(a,f),c)?void(e&&e(d,a,f)):!1},c.error=s(c.error,d,c);var f=this.isNew()?"create":"update";return(this.sync||a.sync).call(this,f,this,c)},destroy:function(b){if(b||(b={}),this.isNew())return this.trigger("destroy",this,this.collection,b);var c=this,d=b.success;return b.success=function(a){c.trigger("destroy",c,c.collection,b),d&&d(c,a)},b.error=s(b.error,c,b),(this.sync||a.sync).call(this,"delete",this,b)},url:function(){var a=q(this.collection)||this.urlRoot||r();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this)},isNew:function(){return null==this.id},change:function(a){this.trigger("change",this,a),this._previousAttributes=d.clone(this.attributes),this._changed=!1},hasChanged:function(a){return a?this._previousAttributes[a]!=this.attributes[a]:this._changed},changedAttributes:function(a){a||(a=this.attributes);var b,c=this._previousAttributes,e=!1;for(b in a)d.isEqual(c[b],a[b])||(e=e||{},e[b]=a[b]);return e},previous:function(a){return a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},_performValidation:function(a,b){var c=this.validate(a);return c?(b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}}),a.Collection=function(a,b){b||(b={}),b.comparator&&(this.comparator=b.comparator),d.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),a&&this.reset(a,{silent:!0}),this.initialize.apply(this,arguments)},d.extend(a.Collection.prototype,a.Events,{model:a.Model,initialize:function(){},toJSON:function(){return this.map(function(a){return a.toJSON()})},add:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;e>c;c++)this._add(a[c],b);else this._add(a,b);return this},remove:function(a,b){if(d.isArray(a))for(var c=0,e=a.length;e>c;c++)this._remove(a[c],b);else this._remove(a,b);return this},get:function(a){return null==a?null:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},sort:function(a){if(a||(a={}),!this.comparator)throw Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return d.map(this.models,function(b){return b.get(a)})},reset:function(a,b){return a||(a=[]),b||(b={}),this.each(this._removeReference),this._reset(),this.add(a,{silent:!0}),b.silent||this.trigger("reset",this,b),this},fetch:function(b){b||(b={});var c=this,d=b.success;return b.success=function(a,e,f){c[b.add?"add":"reset"](c.parse(a,f),b),d&&d(c,a)},b.error=s(b.error,c,b),(this.sync||a.sync).call(this,"read",this,b)},create:function(a,b){var c=this;if(b||(b={}),a=this._prepareModel(a,b),!a)return!1;var d=b.success;return b.success=function(a,e,f){c.add(a,b),d&&d(a,e,f)},a.save(null,b),a},parse:function(a){return a},chain:function(){return d(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(b,c){if(b instanceof a.Model)b.collection||(b.collection=this);else{var d=b;b=new this.model(d,{collection:this}),b.validate&&!b._performValidation(d,c)&&(b=!1)}return b},_add:function(a,b){if(b||(b={}),a=this._prepareModel(a,b),!a)return!1;var c=this.getByCid(a);if(c)throw Error(["Can't add the same model to a set twice",c.id]);return this._byId[a.id]=a,this._byCid[a.cid]=a,this.models.splice(null!=b.at?b.at:this.comparator?this.sortedIndex(a,this.comparator):this.length,0,a),a.bind("all",this._onModelEvent),this.length++,b.silent||a.trigger("add",a,this,b),a},_remove:function(a,b){return b||(b={}),(a=this.getByCid(a)||this.get(a))?(delete this._byId[a.id],delete this._byCid[a.cid],this.models.splice(this.indexOf(a),1),this.length--,b.silent||a.trigger("remove",a,this,b),this._removeReference(a),a):null},_removeReference:function(a){this==a.collection&&delete a.collection,a.unbind("all",this._onModelEvent)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this._remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}}),d.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"],function(b){a.Collection.prototype[b]=function(){return d[b].apply(d,[this.models].concat(d.toArray(arguments)))}}),a.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var f=/:([\w\d]+)/g,g=/\*([\w\d]+)/g,h=/[-[\]{}()+?.,\\^$|#\s]/g;d.extend(a.Router.prototype,a.Events,{initialize:function(){},route:function(b,c,e){a.history||(a.history=new a.History),d.isRegExp(b)||(b=this._routeToRegExp(b)),a.history.route(b,d.bind(function(a){a=this._extractParameters(b,a),e.apply(this,a),this.trigger.apply(this,["route:"+c].concat(a))},this))},navigate:function(b,c){a.history.navigate(b,c)},_bindRoutes:function(){if(this.routes){var a,b=[];for(a in this.routes)b.unshift([a,this.routes[a]]);a=0;for(var c=b.length;c>a;a++)this.route(b[a][0],b[a][1],this[b[a][1]])}},_routeToRegExp:function(a){return a=a.replace(h,"\\$&").replace(f,"([^/]*)").replace(g,"(.*?)"),RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}}),a.History=function(){this.handlers=[],d.bindAll(this,"checkUrl")};var i=/^#*/,j=/msie [\w.]+/,k=!1;d.extend(a.History.prototype,{interval:50,getFragment:function(a,b){if(null==a)if(this._hasPushState||b){a=window.location.pathname;var c=window.location.search;c&&(a+=c),0==a.indexOf(this.options.root)&&(a=a.substr(this.options.root.length))}else a=window.location.hash;return decodeURIComponent(a.replace(i,""))},start:function(a){if(k)throw Error("Backbone.history has already been started");this.options=d.extend({},{root:"/"},this.options,a),this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState),a=this.getFragment();var b=document.documentMode;return(b=j.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))&&(this.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a)),this._hasPushState?e(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!b?e(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=a,k=!0,a=window.location,b=a.pathname==this.options.root,!this._wantsPushState||this._hasPushState||b?(this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=a.hash.replace(i,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl()):(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0)},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();return a==this.fragment&&this.iframe&&(a=this.getFragment(this.iframe.location.hash)),a==this.fragment||a==decodeURIComponent(this.fragment)?!1:(this.iframe&&this.navigate(a),void(this.loadUrl()||this.loadUrl(window.location.hash)))},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){return a.route.test(b)?(a.callback(b),!0):void 0})},navigate:function(a,b){var c=(a||"").replace(i,"");if(this.fragment!=c&&this.fragment!=decodeURIComponent(c)){if(this._hasPushState){var d=window.location;0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history.pushState({},document.title,d.protocol+"//"+d.host+c)}else window.location.hash=this.fragment=c,this.iframe&&c!=this.getFragment(this.iframe.location.hash)&&(this.iframe.document.open().close(),this.iframe.location.hash=c);b&&this.loadUrl(a)}}}),a.View=function(a){this.cid=d.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var l=/^(\S+)\s*(.*)$/,m=["model","collection","el","id","attributes","className","tagName"];d.extend(a.View.prototype,a.Events,{tagName:"div",$:function(a){return e(a,this.el)},initialize:function(){},render:function(){return this},remove:function(){return e(this.el).remove(),this},make:function(a,b,c){return a=document.createElement(a),b&&e(a).attr(b),c&&e(a).html(c),a},delegateEvents:function(a){if(a||(a=this.events))for(var b in d.isFunction(a)&&(a=a.call(this)),e(this.el).unbind(".delegateEvents"+this.cid),a){var c=this[a[b]];if(!c)throw Error('Event "'+a[b]+'" does not exist');var f=b.match(l),g=f[1];f=f[2],c=d.bind(c,this),g+=".delegateEvents"+this.cid,""===f?e(this.el).bind(g,c):e(this.el).delegate(f,g,c)}},_configure:function(a){this.options&&(a=d.extend({},this.options,a));for(var b=0,c=m.length;c>b;b++){var e=m[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(this.el)d.isString(this.el)&&(this.el=e(this.el).get(0));else{var a=this.attributes||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.el=this.make(this.tagName,a)}}}),a.Model.extend=a.Collection.extend=a.Router.extend=a.View.extend=function(a,b){var c=p(this,a,b);return c.extend=this.extend,c};var n={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};a.sync=function(b,c,f){var g=n[b];return f=d.extend({type:g,dataType:"json"},f),f.url||(f.url=q(c)||r()),f.data||!c||"create"!=b&&"update"!=b||(f.contentType="application/json",f.data=JSON.stringify(c.toJSON())),a.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),!a.emulateHTTP||"PUT"!==g&&"DELETE"!==g||(a.emulateJSON&&(f.data._method=g),f.type="POST",f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),"GET"===f.type||a.emulateJSON||(f.processData=!1),e.ajax(f)};var o=function(){},p=function(a,b,c){var e;return e=b&&b.hasOwnProperty("constructor")?b.constructor:function(){return a.apply(this,arguments)},d.extend(e,a),o.prototype=a.prototype,e.prototype=new o,b&&d.extend(e.prototype,b),c&&d.extend(e,c),e.prototype.constructor=e,e.__super__=a.prototype,e},q=function(a){return a&&a.url?d.isFunction(a.url)?a.url():a.url:null},r=function(){throw Error('A "url" property or function must be specified')},s=function(a,b,c){return function(d){a?a(b,d,c):b.trigger("error",b,d,c)}}}.call(this),function(a){var b=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var c=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(c.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var e,f,g,h,i=a(this).data("index.ui-slider-handle");if(!c.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!c._keySliding&&(c._keySliding=!0,a(this).addClass("ui-state-active"),e=c._start(d,i),e===!1))return}switch(h=c.options.step,f=g=c.options.values&&c.options.values.length?c.values(i):c.value(),d.keyCode){case a.ui.keyCode.HOME:g=c._valueMin();break;case a.ui.keyCode.END:g=c._valueMax();break;case a.ui.keyCode.PAGE_UP:g=c._trimAlignValue(f+(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.PAGE_DOWN:g=c._trimAlignValue(f-(c._valueMax()-c._valueMin())/b);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(f===c._valueMax())return;g=c._trimAlignValue(f+h);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(f===c._valueMin())return;g=c._trimAlignValue(f-h)}c._slide(d,i,g)}}).keyup(function(b){var d=a(this).data("index.ui-slider-handle");c._keySliding&&(c._keySliding=!1,c._stop(b,d),c._change(b,d),a(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var c,d,e,f,g,h,i,j,k,l=this.options;return l.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),c={x:b.pageX,y:b.pageY},d=this._normValueFromMouse(c),e=this._valueMax()-this._valueMin()+1,g=this,this.handles.each(function(b){var c=Math.abs(d-g.values(b));e>c&&(e=c,f=a(this),h=b)}),l.range===!0&&this.values(1)===l.min&&(h+=1,f=a(this.handles[h])),i=this._start(b,h),i===!1?!1:(this._mouseSliding=!0,g._handleIndex=h,f.addClass("ui-state-active").focus(),j=f.offset(),k=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=k?{left:0,top:0}:{left:b.pageX-j.left-f.width()/2,top:b.pageY-j.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,h,d),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)
}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,c,d,e,f,g=this.options.range,h=this.options,i=this,j=this._animateOff?!1:h.animate,k={};this.options.values&&this.options.values.length?this.handles.each(function(d){b=(i.values(d)-i._valueMin())/(i._valueMax()-i._valueMin())*100,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",a(this).stop(1,1)[j?"animate":"css"](k,h.animate),i.options.range===!0&&("horizontal"===i.orientation?(0===d&&i.range.stop(1,1)[j?"animate":"css"]({left:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({width:b-c+"%"},{queue:!1,duration:h.animate})):(0===d&&i.range.stop(1,1)[j?"animate":"css"]({bottom:b+"%"},h.animate),1===d&&i.range[j?"animate":"css"]({height:b-c+"%"},{queue:!1,duration:h.animate}))),c=b}):(d=this.value(),e=this._valueMin(),f=this._valueMax(),b=f!==e?(d-e)/(f-e)*100:0,k["horizontal"===i.orientation?"left":"bottom"]=b+"%",this.handle.stop(1,1)[j?"animate":"css"](k,h.animate),"min"===g&&"horizontal"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({width:b+"%"},h.animate),"max"===g&&"horizontal"===this.orientation&&this.range[j?"animate":"css"]({width:100-b+"%"},{queue:!1,duration:h.animate}),"min"===g&&"vertical"===this.orientation&&this.range.stop(1,1)[j?"animate":"css"]({height:b+"%"},h.animate),"max"===g&&"vertical"===this.orientation&&this.range[j?"animate":"css"]({height:100-b+"%"},{queue:!1,duration:h.animate}))}}),a.extend(a.ui.slider,{version:"1.8.24"})}(jQuery),function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};for(var g,h=d.raw?function(a){return a}:decodeURIComponent,i=document.cookie.split("; "),j=0;g=i[j]&&i[j].split("=");j++)if(h(g[0])===b)return h(g[1]||"");return null}}(jQuery),function(a){a.extend(a.fn,{swapClass:function(a,b){var c=this.filter("."+a);return this.filter("."+b).removeClass(b).addClass(a),c.removeClass(a).addClass(b),this},replaceClass:function(a,b){return this.filter("."+a).removeClass(a).addClass(b).end()},hoverClass:function(b){return b=b||"hover",this.hover(function(){a(this).addClass(b)},function(){a(this).removeClass(b)})},heightToggle:function(a,b){a?this.animate({height:"toggle"},a,b):this.each(function(){jQuery(this)[jQuery(this).is(":hidden")?"show":"hide"](),b&&b.apply(this,arguments)})},heightHide:function(a,b){a?this.animate({height:"hide"},a,b):(this.hide(),b&&this.each(b))},prepareBranches:function(a){return a.prerendered||(this.filter(":last-child:not(ul)").addClass(b.last),this.filter((a.collapsed?"":"."+b.closed)+":not(."+b.open+")").find(">ul").hide()),this.filter(":has(>ul)")},applyClasses:function(c,d){if(this.filter(":has(>ul):not(:has(>a))").find(">span").unbind("click.treeview").bind("click.treeview",function(b){this==b.target&&d.apply(a(this).next())}).add(a("a",this)).hoverClass(),!c.prerendered){this.filter(":has(>ul:hidden)").addClass(b.expandable).replaceClass(b.last,b.lastExpandable),this.not(":has(>ul:hidden)").addClass(b.collapsable).replaceClass(b.last,b.lastCollapsable);var e=this.find("div."+b.hitarea);e.length||(e=this.prepend('<div class="'+b.hitarea+'"/>').find("div."+b.hitarea)),e.removeClass().addClass(b.hitarea).each(function(){var b="";a.each(a(this).parent().attr("class").split(" "),function(){b+=this+"-hitarea "}),a(this).addClass(b)})}this.find("div."+b.hitarea).click(d)},treeview:function(c){function d(c,d){function f(d){return function(){return e.apply(a("div."+b.hitarea,c).filter(function(){return d?a(this).parent("."+d).length:!0})),!1}}a("a:eq(0)",d).click(f(b.collapsable)),a("a:eq(1)",d).click(f(b.expandable)),a("a:eq(2)",d).click(f())}function e(){a(this).parent().find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightToggle(c.animated,c.toggle),c.unique&&a(this).parent().siblings().find(">.hitarea").replaceClass(b.collapsableHitarea,b.expandableHitarea).replaceClass(b.lastCollapsableHitarea,b.lastExpandableHitarea).end().replaceClass(b.collapsable,b.expandable).replaceClass(b.lastCollapsable,b.lastExpandable).find(">ul").heightHide(c.animated,c.toggle)}function f(){var b=[];i.each(function(c,d){b[c]=a(d).is(":has(>ul:visible)")?1:0}),a.cookie(c.cookieId,b.join(""),c.cookieOptions)}function g(){var b=a.cookie(c.cookieId);if(b){var d=b.split("");i.each(function(b,c){a(c).find(">ul")[parseInt(d[b])?"show":"hide"]()})}}if(c=a.extend({cookieId:"treeview"},c),c.toggle){var h=c.toggle;c.toggle=function(){return h.apply(a(this).parent()[0],arguments)}}this.data("toggler",e),this.addClass("treeview");var i=this.find("li").prepareBranches(c);switch(c.persist){case"cookie":var j=c.toggle;c.toggle=function(){f(),j&&j.apply(this,arguments)},g();break;case"location":var k=this.find("a").filter(function(){return this.href.toLowerCase()==location.href.toLowerCase()});if(k.length){var l=k.addClass("selected").parents("ul, li").add(k.next()).show();c.prerendered&&l.filter("li").swapClass(b.collapsable,b.expandable).swapClass(b.lastCollapsable,b.lastExpandable).find(">.hitarea").swapClass(b.collapsableHitarea,b.expandableHitarea).swapClass(b.lastCollapsableHitarea,b.lastExpandableHitarea)}}return i.applyClasses(c,e),c.control&&(d(this,c.control),a(c.control).show()),this}}),a.treeview={};var b=a.treeview.classes={open:"open",closed:"closed",expandable:"expandable",expandableHitarea:"expandable-hitarea",lastExpandableHitarea:"lastExpandable-hitarea",collapsable:"collapsable",collapsableHitarea:"collapsable-hitarea",lastCollapsableHitarea:"lastCollapsable-hitarea",lastCollapsable:"lastCollapsable",lastExpandable:"lastExpandable",last:"last",hitarea:"hitarea"}}(jQuery);var Program=Backbone.Model.extend({defaults:function(){return{name:"",code:""}},initialize:function(){}}),Course=Backbone.Model.extend({defaults:function(){return{name:"",code:""}},initialize:function(){}}),PlayerTheme=Backbone.Model.extend({defaults:function(){return{name:"",colorCode:"",path:""}},initialize:function(){},getName:function(){return this.get("name")},setName:function(a){this.set({name:a})},getColor:function(){return this.get("colorCode")},setColor:function(a){this.set({colorCode:a})},getPath:function(){return this.get("path")},setPath:function(a){this.set({path:a})}}),LearningObjective=Backbone.Model.extend({initialize:function(){},defaults:function(){return{name:"",code:"",pages:null,Glossaries:null}}}),Page=Backbone.Model.extend({defaults:function(){return{title:"",formattedTitle:"",name:"",sequenceNumber:-1,template:"",isCurrentPage:!1,isVisited:!1,topicXMLURL:"",assetReferenceXMLURL:"",notes:"",summaryAudio:null,commentReferenceXMLURL:"",isAssessmentType:!1,subPages:new Pages,pageSequence:"",breadcrumb:"",branching:!1,parent:""}},initialize:function(){}}),Pages=Backbone.Collection.extend({model:Page,getPageIndexFor:function(a){return this.indexOf(a)},getTotalPageCount:function(){return this.length},getFirstPage:function(){return this.first()},getPreviousPage:function(a){if(a){var b=this.getPageIndexFor(a);return b>0?this.at(b-1):null}return this.getFirstPage()},getNextPage:function(a){if(a){var b=this.getPageIndexFor(a);return b<this.getTotalPageCount()-1?this.at(b+1):null}return this.getFirstPage()},getLastPage:function(){return this.last()},isFirstPage:function(a){return this.getFirstPage()==a?!0:!1},isLastPage:function(a){return this.getLastPage()==a?!0:!1},getPageForIndex:function(a){return this.at(a)},getPageForPageId:function(a){var b="Topic_"+a+".xml$",c={};return _.each(this.models,function(a){a.attributes.topicXMLURL.split("?")[0].match(b)&&(c=a)}),c?c:null}});ManifestAdapter.parseXML=function(a){function b(a){a.get("template")&&(l.add(a),a.set({sequenceNumber:n++})),a.get("subPages").size()&&a.get("subPages").each(b,this)}var c={};if(c.numberOfAssesmentPage=0,$(a).find("AppConfiguration assessment").size()){var d=$.trim($(a).find("AppConfiguration assessment").text());c.isAssessmentPackage="true"==d?!0:!1}else c.isAssessmentPackage=!1;if($(a).find("AppConfiguration Package-type").size()){var e=$.trim($(a).find("AppConfiguration Package-type").text());c.PackageType=e,c.pageShuffle="true"==$.trim($(a).find("AppConfiguration Package-type").attr("shuffle"))?!0:!1}else c.PackageType="",c.pageShuffle=!1;if(c.isSummaryScreen="SCORM 1.2 With Summary"==c.PackageType||"SCORM 2004 with summary"==c.PackageType?!0:!1,(1==c.isSummaryScreen||1==c.pageShuffle)&&(1==c.pageShuffle&&Modernizr.load({nope:["player/scripts/SummaryShuffleManager.js"],complete:function(){}}),1==c.isSummaryScreen&&Modernizr.load({nope:["player/scripts/SummaryShuffleManager.js","scripts/utils/TLFToPlainTextAdapter.js","scripts/common/MediaTypes.js","scripts/common/MediaElementAdapter.js"],complete:function(){}})),c.locale=$.trim($(a).find("locale").text()),$(a).find("AppConfiguration maxtries").size()&&(c.maxtries=$(a).find("AppConfiguration maxtries").text()),c.playerTheme=new PlayerTheme,$(a).find("AppConfiguration Theme").size()&&c.playerTheme.set({name:$(a).find("AppConfiguration Theme").attr("name"),colorCode:$(a).find("AppConfiguration Theme").attr("colorCode")}),c.copyRightXML=$(a).find("copyright_path").attr("XMLsrc"),c.program=new Program,c.program.set({name:$(a).find("AppConfiguration Program").attr("name"),code:$(a).find("AppConfiguration Program").attr("code")}),c.course=new Course,c.course.set({name:$(a).find("AppConfiguration Course").attr("name"),code:$(a).find("AppConfiguration Course").attr("code")}),$(a).find("AppConfiguration Breadcrumb").size()){var f=$(a).find("AppConfiguration Breadcrumb").text(),g=f.split("//");g||(g=[]),$(g).each(function(a,b){g[a]=$.trim(b)}),c.breadcrumbTrail.setTrailSteps(g)}var h="",i="";if($(a).find("xml > CS").size()){var j=$(a).find("xml > CS");h=getTitle(j),i=$(a).find("xml > CS").attr("code")}else if($(a).find("xml > LO").size()){var j=$(a).find("xml > LO");h=getTitle(j),i=$(a).find("xml > LO").attr("code")}c.learningObjective=new LearningObjective,c.learningObjective.set({name:h,code:i});var k=new Pages,l=new Pages,m=$(a).find("xml > CS"),n=1;if(m.length>0)$(m).each(function(a,b){k.add(getSilodata(b,"",a+1))}),k.each(b,this);else if($(a).find("xml > LO").size()){var o=$(a).find("Page");if(c.pageShuffle){var p=LMSCommunicator.initializeLMS(c.PackageType),q=[],r={};if(r[0]=new Object,p){if(""!=LMSCommunicator.getSuspendData()){r=JSON.parse(LMSCommunicator.getSuspendData());for(var s=1;void 0!=r[0][s];s++)q[s-1]=r[0][s]}for(var t=[],u=[],v=[],w=[],x=0,s=0,y=0;s<o.length;s++){x=0,t[s]=$(o[s]).attr("XMLsrc").substring($(o[s]).attr("XMLsrc").lastIndexOf("_")+1,$(o[s]).attr("XMLsrc").lastIndexOf("."));for(var z=0;z<q.length;z++)q[z]==t[s]&&++x;0==x&&(v[y]=t[s],++y)}shuffle(v);for(var s=0;s<q.length;s++)u[s]=q[s];for(var s=u.length,z=0;z<o.length-q.length;s++,z++)u[s]=v[z];for(var A,s=0;s<o.length;s++){A=-1;for(var z=0;z<o.length;z++)t[z]==u[s]&&(A=z);-1!=A&&(w[s]=o[A])}for(var s=0;s<w.length;s++)o[s]=w[s]}}$(o).each(function(a,b){var d=new Page;d.set(getNodeData(b,"",a+1)),1==d.attributes.isAssessmentType&&(c.numberOfAssesmentPage=c.numberOfAssesmentPage+1),k.add(d),l.add(d)})}c.learningObjective.set({treePages:k}),c.learningObjective.set({pages:l});var B=[],C=$(a).find("themes > theme");C.size()>0&&$(C).each(function(a,b){var c={};c.name=$(b).find("name").text(),c.path=$(b).find("path").text(),B[a]=c}),c.themes=B;var D=[],E=$(a).find("pageStyles > style");E.size()>0&&$(E).each(function(a,b){var c={};c.name=$(b).find("name").text(),c.path=$(b).find("path").text(),D[a]=c}),c.pageStyles=D;var F=[],G=$(a).find("languages >language");G.size()>0&&$(G).each(function(a,b){var c={};c.name=$(b).text(),c.localeName=$(b).attr("locale"),F[a]=c}),c.localeStyles=F;var H=[],I=$(a).find("Glossaries > Glossary");return I.size()>0&&$(I).each(function(){H.push($(this).attr("path"))}),c.glossaryFiles=H,c};var PlayerManager=Backbone.Model.extend({defaults:function(){return{program:null,course:null,learningObjective:null,breadcrumbTrail:null,currentPage:null,notes:"Dummy Notes",glossary:null,isInAssessmentMode:!1,PackageType:"",packageTheme:null,totalNoOfAssessmetQustions:null,pageStyles:[],isPageShuffle:!1,isSummaryScreenShow:!1}},initialize:function(){_.bindAll(this)},getPages:function(){return this.get("learningObjective")?this.get("learningObjective").get("pages"):null},geTreePages:function(){return this.get("learningObjective")?this.get("learningObjective").get("treePages"):null},getCurrentPage:function(){return this.get("currentPage")},setCurrentPage:function(a){window.previous_page=window.playerManager.getCurrentPage()?window.playerManager.getCurrentPage().attributes.pageSequence:0,this.getCurrentPage()&&this.getCurrentPage().set({isCurrentPage:!1}),this.set({currentPage:a}),this.getCurrentPage().set({isCurrentPage:!0})},getCurrentPageIndex:function(){return this.getCurrentPage()&&this.getPages()?this.getPages().getPageIndexFor(this.getCurrentPage()):-1},getIsInAssessmentMode:function(){return this.get("isInAssessmentMode")},setIsInAssessmentMode:function(a){this.set({isInAssessmentMode:a})},getPackageType:function(){return this.get("PackageType")},setPackageType:function(a){this.set({PackageType:a})},getTotalNoOfAssessmetQustions:function(){return this.get("totalNoOfAssessmetQustions")},setTotalNoOfAssessmetQustions:function(a){this.set({totalNoOfAssessmetQustions:a})},getPageStyles:function(){return this.get("pageStyles")},setPageStyles:function(a){this.set({pageStyles:a})},getSuspendDataOnLMS:function(){return this.get("suspendDataOnLMS")},setSuspendDataOnLMS:function(a){this.set({suspendDataOnLMS:a})},getTheme:function(){return this.get("packageTheme")},setTheme:function(a){this.set({packageTheme:a})},getIsPageShuffle:function(){return this.get("isPageShuffle")},setIsPageShuffle:function(a){this.set({isPageShuffle:a})},getIsSummaryScreenShow:function(){return this.get("isSummaryScreenShow")},setIsSummaryScreenShow:function(a){this.set({isSummaryScreenShow:a})}}),PageListItemView=Backbone.View.extend({defaults:function(){return{}},tagName:"li",template:_.template($("#pageListItemTemplate").html()),initialize:function(){this.getPage().bind("change:isCurrentPage",this.renderCurrentPageViewStatus,this),this.getPage().bind("destroy",this.remove,this)},events:{"enter a":"goToPage","keydown a":"onKeyDown"},getPlayerManager:function(){return window.playerManager},getPage:function(){return this.model},render:function(){if($(this.el).html(this.template(this.getPage().toJSON())),this.getPage().get("pageSequence").toString().indexOf(".")>0){var a=this.getPage().get("pageSequence").toString().split(".").length;$(this.el).find("a").css("padding-left",20*a+"px")}if($($(this.el).find(".pageListItem").get(0)).bind("click",{param:this},this.goToPage),this.getPage().get("subPages").size()&&!this.getPage().get("branching")){var b=$("<ul></ul>");$(this.el).children(".pageListItem").addClass("folder");var c=this.getPage().get("subPages");c.each(function(a){var c=new PageListItemView({model:a});$(b).append(c.render().el)},this)}else $(this.el).children(".pageListItem").addClass("file"),this.getPage().get("branching")&&$(this.el).attr("id","clubbed"+this.getPage().get("sequenceNumber"));return $(this.el).append(b),$(this.el).find("a").enterEnabled(),$(this.el).find("a").makeFocusOutDirectionEnabled(),this},renderCurrentPageViewStatus:function(a,b){b?$($(this.el).find(".pageListItem").get(0)).addClass("isCurrent"):$($(this.el).find(".pageListItem").get(0)).removeClass("isCurrent")},goToPage:function(a){a.data.param.getPage().get("template")&&($(a.currentTarget).parent().children(".hitarea").click(),$(".pageListItem").removeClass("isCurrent"),a.data.param.getPage().get("template")&&a.data.param.getPlayerManager().setCurrentPage(a.data.param.getPage()))},onKeyDown:function(a){var b={left:37,up:38,right:39,down:40},c=9,d=null,e=a.which||a.keyCode;switch(e){case b.right:case b.down:a.preventDefault(),d=jQuery.Event("keydown"),d.which=c,d.keyCode=c,d.shiftKey=!1;break;case b.left:case b.up:a.preventDefault(),d=jQuery.Event("keydown"),d.which=c,d.keyCode=c,d.shiftKey=!0}d&&($(this.el).find("a").trigger(d),$(this.el).find("a").blur())},remove:function(){return $(this.el).remove(),this}}),PageListView=Backbone.View.extend({defaults:function(){return{}},el:"#pageList",initialize:function(){this.getPages().bind("add",this.addPageItem,this),ClientInformation.isMobileDevice()?($("#pageListScroller").css("overflow-x","hidden"),$("#pageListScroller").css("overflow-y","scroll")):($("#pageListScroller").css("overflow-x","hidden"),$("#pageListScroller").css("overflow-y","auto"))},getPages:function(){return this.collection},getPlayerManager:function(){return window.playerManager},events:{},addPageItem:function(a){var b=new PageListItemView({model:a});if($(this.el).append(b.render().el),this.scroller){var c=this.scroller;setTimeout(function(){c.refresh()},0)}},render:function(){$(this.el).empty(),this.getPages()&&this.getPages().each(this.addPageItem,this);var a=1002;$(this.el).find("a").each(function(b,c){$(c).attr("tabindex",a++)}),ClientInformation.isMobileDevice()||$(this.el).find("a").bind("blur",this.onCurrentPageMenuItemFocusOut)},scrollToIndex:function(){ClientInformation.isMobileDevice()||$("#pageListScroller .isCurrent a").focus()},onCurrentPageMenuItemFocusOut:function(a){var b=$(a.target).focusOutDirection(),c=$(a.target).closest("li"),d=null;b>0?d=$(c).next():0>b&&(d=$(c).prev()),d&&$(d).find("a").focus()}}),PlayerView=Backbone.View.extend({defaults:function(){return{}},el:"body",playerTabIndex:1101,initialize:function(){if(_.bindAll(this),window.isFirstRun=!0,this.getPlayerManager().bind("change:learningObjective",function(a,b){this.renderLearningObjective(b)},this),this.getPlayerManager().bind("change:breadcrumbTrail",function(a,b){this.renderBreadcrumbTrail(b)},this),this.getPlayerManager().bind("change:currentPage",function(a,b){this.renderPage(b)},this),this.getPlayerManager().bind("change:isInAssessmentMode",function(a,b){b&&this.changeToAssessmentMode()},this),$("#bugsAccordion").height($(window).height()-($(".show_check").height()+$(".sort_head").height()+126)),ClientInformation.isMobileDevice()?$("#transcriptScroller").css("overflow-y","scroll"):($("#transcriptScroller").css("overflow-x","hidden"),$("#transcriptScroller").css("overflow-y","auto")),ClientInformation.isMobileDevice())this.$("#volumeWrapper").hide();else{this.$("#volumeWrapper").show();{this.$("#summaryAudio").jPlayer("option","volume")}$("#volumeControl").slider({range:"min",orientation:"vertical",value:.5,min:0,max:1,step:.1}),$("#volumeControl").bind("slidechange",this.onVolumeControlChange),$("#volumeControl").bind("slide",this.onVolumeControlChange),$("#summaryAudioMuteToggle").bind("change",this.toggleSummaryAudioVolume)}this.$("#summaryAudio").bind($.jPlayer.event.play,this.onSummaryAudioPlay),this.$("#summaryAudio").bind($.jPlayer.event.error,this.onSummaryAudioPlayerError),this.resetPlayerForNewPage(),this.onPlayerTitleBlur(),this.onFirstLinkBlur(),ClientInformation.isMobileDevice()||(this.$(".playerToolBarButton").tooltip({cancelDefault:!1,relative:!0,position:"top center",events:{def:"mouseover, mouseleave mouseup mousedownoutside keypressoutside",tooltip:"mousedown mouseover, mouseleave mouseup enter"},tipClass:"toolBarButtontip"}),this.$("#learningObjectiveTitle").tooltip({cancelDefault:!1,relative:!0,position:"bottom center",events:{def:"mouseover, mouseleave mouseup mousedownoutside keypressoutside",tooltip:"mousedown mouseover, mouseleave mouseup enter"},tipClass:"toolBarButtontip"}).dynamic(),this.$(".playerToolBarButton").enterEnabled(),$(".playerToolBarButton").makeFocusOutDirectionEnabled()),"Explorer"==$.client.browser&&this.resizePageLoaderToFit(),this.$("#pageLoader").bind("load",this.onCurrentPageLoad),this.$(window).bind("beforeunload",this.onPlayerUnload),ClientInformation.isMobileDevice()&&this.$("body").bind("touchstart",function(a){a.preventDefault()}),$("#windowResizer").bind("change",this.resizeWindowByValue),this.$("#pageListPanel").bind("mousedownoutside keydownoutside",this.hideMenu),this.$("#volumeControlPanel").bind("mousedownoutside keydownoutside",this.hideVolumeControl),this.$("#btnGlossary").bind("mousedown keydown",function(a){a.stopPropagation()}),this.$("#btnPageList").bind("mousedown keydown",function(a){a.stopPropagation()}),this.$("#btnTranscript").bind("mousedown keydown",function(a){a.stopPropagation()}),this.$("#btnVolume").bind("mousedown keydown",function(a){a.stopPropagation()}),this.$("#glossaryListPanel").bind("close",this.hideGlossary),this.$(window).bind("load",function(){setTimeout(function(){window.scrollTo(0,1)},0)}),this.$(window).bind("resize",$.debounce(100,this.onWindowResize)),this.$("#summaryAudioContainer").css("visibility","hidden"),this.$("#volumeWrapper").css("visibility","hidden"),this.$("#transcriptWrapper").css("visibility","hidden"),this.$("#transcriptPanel").css("visibility","hidden"),this.$("#summaryWrapper").css("visibility","hidden")},onWindowResize:function(){"Explorer"==$.client.browser&&this.resizePageLoaderToFit(),setTimeout(this.resizePageLoaderToContent,0),this.resizeGlossaryPanel(),ClientInformation.isMobileDevice()&&this.getPageList()},eatEvent:function(a){a.stopPropagation(),a.preventDefault()},getPlayerManager:function(){return this.model},getPageList:function(){return this.pageList},getConfigurationFileURL:function(){return"../../config/config.js"},goToPageBySequence:function(a){this.goToPage(this.getPlayerManager().getPages().getPageForIndex(a))},goToPageByPageId:function(a){this.goToPage(this.getPlayerManager().getPages().getPageForPageId(a))},setPageList:function(a){this.pageList=a},getGlosaaryPanel:function(){return this.glossaryPanel},setGlosaaryPanel:function(a){this.glossaryPanel=a},events:{"click #btnPreviousPage":"goToPreviousPage","click #btnNextPage":"goToNextPage","click #btnPageList":"showMenu","click #btnTranscript":"showTranscript","click #btnVolume":"showVolumeControl","click #btnPrintPage":"showPrintPage","click #btnGlossary":"toggleGlossaryPanel","click #btnNotes":"toggleNotesPanel","click #columnView":"multiColIconClickedFun","change #pageStyles_list":"updatereflowableCSS","click #btnsummary":"toggleSummaryScreenPanel","change #localeStyle_list":"updateLocalize","click .submitAnswers":"submitAnswerFun","click .showAnswers":"showMeAnswerFun","click .resetAnswers":"resetAnswerFun"},updateLocalize:function(){var a=$($("#localeStyle_list")).val(),b="";window.locale=a,this.$('*[rel*="localize"]').localize("player",{language:a,pathPrefix:b+"scripts/localization"}),this.postmessageToTemplate("localValueChanged$$"+a,"*")},updatereflowableCSS:function(){var a=$("#pageStyles_list").val();this.$("#pageLoader")[0].contentWindow.$("head").append('<link type="text/css" rel="stylesheet" href="'+a+'" />')},multiColIconClickedFun:function(){this.$("#columnView").toggleClass("columnViewDouble "),this.postmessageToTemplate("multiColIconClicked","*")},submitAnswerFun:function(){this.postmessageToTemplate("submitAnswerData","*")},showMeAnswerFun:function(){this.postmessageToTemplate("showMeAnswerData","*")},resetAnswerFun:function(){this.postmessageToTemplate("resetAnswerData","*")},requestedFeatureNotImplemented:function(){alert("This feature is not implemented yet")},render:function(){},initializeLMS:function(){var a=LMSCommunicator.initializeLMS(this.getPlayerManager().getPackageType(),this.getPlayerManager().getTotalNoOfAssessmetQustions());return a&&this.getPlayerManager().setSuspendDataOnLMS(LMSCommunicator.getSuspendData()),a},goToPage:function(a){this.getPlayerManager().set({currentPage:a})},goToFirstPage:function(){this.getPlayerManager().setCurrentPage(this.getPlayerManager().getPages().getFirstPage())},goToPreviousPage:function(){this.getPlayerManager().setCurrentPage(this.getPlayerManager().getPages().getPreviousPage(this.getPlayerManager().getCurrentPage()))},goToNextPage:function(){if($("#pageLoader")[0].contentWindow.postMessage("callSetData$$","*"),this.getPlayerManager().getIsSummaryScreenShow()||this.getPlayerManager().getIsPageShuffle())try{(new dataStoringForScorm).dataOnNextButton()}catch(a){}this.getPlayerManager().setCurrentPage(this.getPlayerManager().getPages().getNextPage(this.getPlayerManager().getCurrentPage()))},goToLastPage:function(){this.getPlayerManager().setCurrentPage(this.getPlayerManager().getPages().getLastPage())},renderLearningObjective:function(a){isLMSSupported&&this.initializeLMS();var b=window.addEventListener?"addEventListener":"attachEvent",c=window[b],d="attachEvent"==b?"onmessage":"message",e=this;if(c(d,function(a){var b=a.data.split("$$");if("setAudio"==b[0]){var c={};if(b.length>2&&(c.hasMedia=b[1],c.urls={},c.urls["default"]=b[2],c.urls.mp3=b[2],c.alternateText=b[3]),e.setSummaryAudio(c),e.getPlayerManager().getIsInAssessmentMode()&&e.getPlayerManager().getCurrentPage().get("isAssessmentType")&&e.postmessageToTemplate("assesment","*"),-1!=window.template_state_flag){var d="getPageData$$"+pagesJsonObject[window.playerManager.getCurrentPage().attributes.pageSequence];e.postmessageToTemplate(d)}}else if("printData"==b[0])if("no_print_adaptor"==b[1]){var f=$("#printFeedback");$.colorbox($.extend({},colorBoxConfiguration,{href:f,width:250,transition:"none",inline:!0,overlayClose:!1,close:"<a href='javascript:;'>Close</a>",onComplete:function(){onModalComplete()},onClosed:function(){onModalClose()}}))}else"none"==b[1]||"block"==b[1]?$("#printButtonWrapper").css("display",b[1]):e.showPrintPageHtml(JSON.parse(b[1]));else"timer"==b[0]||"stoptimer"==b[0]||("templateAudio"==b[0]?e.onPageMediaPlay():"tabPress"==b[0]?this.stopAudioOnTabPress():"firstItemShiftTab"==b[0]?this.onFirstContentWindowItemShiftTab():"announceLastItemTab"==b[0]?this.onLastContentWindowItemTab():"showMultiColIcon"==b[0]?e.showMultiColIconFun():"getTemplateState"==b[0]?pagesJsonObject[window.previous_page]=b[1]:"Header"==b[0]?($("#learningObjectiveTitle").html(b[1]?b[1]:""),e.resizePageLoaderToContent()):"hideOperationsContainer"==b[0]?$("#globaloperationsContainer").css("display","none"):"showMe"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#ShowMe").show(),this.$("#pageLoader")[0]&&("wordsearch"==b[1]||"hangman"==b[1]?($("#btnSubmit").hide(),$("#resetBtn").hide()):($("#btnSubmit").show(),$("#resetBtn").show()))):"hideShowMe"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#ShowMe").hide(),this.$("#pageLoader")[0]&&("wordsearch"==b[1]||"hangman"==b[1]?($("#btnSubmit").hide(),$("#resetBtn").hide()):($("#btnSubmit").show(),$("#resetBtn").show()))):"attemptAgain"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#attemptagain").show(),this.$("#pageLoader")[0]&&("wordsearch"==b[1]||"hangman"==b[1]?($("#btnSubmit").hide(),$("#resetBtn").hide()):($("#btnSubmit").show(),$("#resetBtn").show()))):"hideAttemptAgain"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#attemptagain").hide(),this.$("#pageLoader")[0]&&("wordsearch"==b[1]||"hangman"==b[1]?($("#btnSubmit").hide(),$("#resetBtn").hide()):($("#btnSubmit").show(),$("#resetBtn").show()))):"reset"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#resetBtn").show()):"hideReset"==b[0]?($("#globaloperationsContainer").css("display","block"),$("#resetBtn").hide()):"disableButton"==b[0]?e.disableThePlayerButton(b[1]):"enableButton"==b[0]&&e.enableThePlayerButton(b[1]))},!1),this.getPlayerManager().getIsInAssessmentMode()||(this.setPageList(new PageListView({collection:this.getPlayerManager().geTreePages()})),this.getPageList().render()),a.get("glossaries")&&a.get("glossaries").length){{a.get("glossaries")}this.glossaryView=new GlossaryView({model:new GlossariesViewHelper({glossaries:a.get("glossaries")})}),this.setGlosaaryPanel(this.glossaryView)}else this.$("#btnGlossary").button("disable");if(this.getPlayerManager().getPages().getTotalPageCount()<=1&&$("html").addClass("no-navigation"),isLMSSupported){this.updateScoreThresholdsForPackage(this.getPlayerManager().getPages());var f=LMSCommunicator.getLessonLocation();if(f>=0){var g=this.getPlayerManager().getPages().getTotalPageCount();g>f?this.goToPage(this.getPlayerManager().getPages().getPageForIndex(f)):(LMSCommunicator.getLessonStatus()==LMSLessonStatus.COMPLETE,$("#toolBarContainer .ui-button").button("disable"),$("#toolBarContainer .ui-button").unbind())}else this.goToFirstPage()}else this.goToFirstPage();var h=this.getPageList();$("#pageList").treeview({collapsed:!0,toggle:function(){ClientInformation.isMobileDevice()&&h.scroller.refresh()}}),this.$("#btnPageList").attr("tabindex","1000"),this.$("#btnPrintPage").attr("tabindex",this.playerTabIndex++),this.$("#btnGlossary").attr("tabindex",this.playerTabIndex++),this.playerTabIndex=this.renderNotes(this.playerTabIndex),this.$("#btnNotes").attr("tabindex",this.playerTabIndex++),this.$("#btnPreviousPage").attr("tabindex",this.playerTabIndex++),this.$("#pageTrackingStatus").attr("tabindex",this.playerTabIndex++),this.$("#btnNextPage").attr("tabindex",this.playerTabIndex++),this.$("#btnVolume").attr("tabindex",this.playerTabIndex++),this.$(".jp-play").attr("tabindex",this.playerTabIndex++),this.$("#transcript").attr("tabindex",this.playerTabIndex++),this.$("#btnTranscript").attr("tabindex",this.playerTabIndex++),this.$("#btnHelp").attr("tabindex",this.playerTabIndex++),setTimeout(function(){$("#btnPageList").focus()},0);var i=this;$("#transcript").makeFocusOutDirectionEnabled(),$("#pageList li:first").find("a").bind("blur",function(a){$(a.target).focusOutDirection()<0&&(i.hideMenu(),i.$("#btnPageList").focus())
}),$("#pageList li:last").find("a").bind("blur",function(a){$(a.target).focusOutDirection()>0&&(i.hideMenu(),i.$("#btnPrintPage").focus(),$("#btnPageList").focus())}),$("#btnHelp").bind("blur",function(a){$(a.target).focusOutDirection()>0&&(a.preventDefault(),setTimeout(function(){$("#learningObjectiveTitle").focus()},0))}),$(document).bind("keydown",function(a){var b=9,c=a.which||a.keyCode;c==b&&i.stopAudioOnTabPress()}),$(".hitarea").each(function(a){if(0!=a){var b=parseInt($(this).siblings(".pageListItem").find("a").css("padding-left"));b&&$(this).css("margin-left",b-15+"px")}}),window.locale&&$('*[rel*="localize"]').localize("player",{language:window.locale,pathPrefix:"scripts/localization"})},renderBreadcrumbTrail:function(a){window.breadcrumbTrailView=new BreadcrumbTrailView({model:a}),breadcrumbTrailView.render()},renderPage:function(a){this.resetPlayerForNewPage();var b;b=$("html").is(".ie7")?a.get("template").replace(".html","_ie7.html")+"?mode="+PreviewModes.PLAYER_PREVIEW_MODE:a.get("template")+"?mode="+PreviewModes.PLAYER_PREVIEW_MODE,window.locale&&(b=b+"&locale="+window.locale),$("#pageLoader").attr("src",b),window.currentPageId=a.get("topicXMLURL").match("_[0-9]+")[0].split("_")[1],this.$("#totalPageCount").html(this.getPlayerManager().getPages().getTotalPageCount()),this.$("#currentPageSequence").html(a.get("sequenceNumber")+"&nbsp;"),this.$("#btnNextPage").button("disable"),this.$("#btnPreviousPage").button("disable"),this.$("#columnView").hide();var c=this;ClientInformation.isMobileDevice()?setTimeout(function(){c.getPlayerManager().getIsInAssessmentMode()||(c.getPlayerManager().getPages().isFirstPage(a)?(c.$("#btnPreviousPage").button("disable"),c.$("#btnNextPage").button("enable")):(c.$("#btnPreviousPage").button("enable"),c.$("#btnNextPage").button("disable"))),c.$("#btnNextPage").button(c.getPlayerManager().getPages().isLastPage(a)?"disable":"enable"),$(".heads a").removeClass("selected"),$("#OpenBugs,#ClosedBugs").attr("checked",!0)},1e3):setTimeout(function(){if(c.getPlayerManager().getIsInAssessmentMode()||(c.getPlayerManager().getPages().isFirstPage(a)?(c.$("#btnPreviousPage").button("disable"),c.$("#btnNextPage").button("enable")):(c.$("#btnPreviousPage").button("enable"),c.$("#btnNextPage").button("disable"))),c.getPlayerManager().getPages().isLastPage(a)){if(c.getPlayerManager().getIsSummaryScreenShow())try{(new dataStoringForScorm).isLastPageForSummary()}catch(b){}c.$("#btnNextPage").button("disable")}else c.$("#btnNextPage").button("enable");$(".heads a").removeClass("selected"),$("#OpenBugs,#ClosedBugs").attr("checked",!0)},1e3)},showMenu:function(){if(this.$("#pageListPanel").is(":hidden")){this.hideAllPoppedElements(),this.$("#pageListPanel").show();var a=this.getPlayerManager().getCurrentPageIndex();1>a&&(a=1),ClientInformation.isMobileDevice()&&this.getPageList().scroller.refresh(),this.pageList.scrollToIndex(a-1),this.$("#btnPageList").addClass("selected")}else this.hideAllPoppedElements()},hideMenu:function(){this.$("#pageListPanel").hide(),this.$("#btnPageList").removeClass("selected"),this.pageList&&this.pageList.scrollToIndex(0)},toggleGlossaryPanel:function(){this.$("#glossaryListPanelOverlay").is(":hidden")?(this.hideAllPoppedElements(),this.showGlossary()):this.hideAllPoppedElements()},showIframe:function(){ClientInformation.isMobileDevice()&&ClientInformation.isAndroidDevice()&&this.$("#pageLoader").is(":hidden")&&(this.$("#pageLoader").removeClass("hidden"),this.resizePageLoaderToContent())},hideIframe:function(){ClientInformation.isMobileDevice()&&ClientInformation.isAndroidDevice()&&!this.$("#pageLoader").is(":hidden")&&this.$("#pageLoader").addClass("hidden")},resizeGlossaryPanel:function(){var a=$("#glossaryListPanel").width(),b=$("#glossaryListPanel").height(),c=$(window).width(),d=$("#playerWrapper").height(),e=(c-a)/2,f=(d-b)/2;0>f&&(f=0),$("#glossaryListPanel").css("top",f+"px"),$("#glossaryListPanel").css("left",e+"px"),this.glossaryView&&this.glossaryView.refreshGlossariesList()},showGlossary:function(){this.hideIframe(),this.$("#glossaryListPanelOverlay").show(),this.resizeGlossaryPanel(),this.$("#btnGlossary").addClass("selected"),this.glossaryView.refreshGlossariesList(),this.hideTranscript()},hideGlossary:function(){this.$("#glossaryListPanelOverlay").hide(),this.showIframe(),this.$("#btnGlossary").removeClass("selected"),this.$("#btnGlossary").focus()},showTranscript:function(){if(this.$("#transcriptPanel").is(":hidden")){if(this.hideAllPoppedElements(),this.$("#btnTranscript").addClass("selected"),this.$("#transcriptPanel").show(),$("#transcript").focus(),this.transcriptScroller){var a=this.transcriptScroller;setTimeout(function(){a.refresh()},0)}}else this.hideAllPoppedElements(),this.hideTranscript()},hideTranscript:function(){this.$("#transcriptPanel").hide(),this.$("#btnTranscript").removeClass("selected")},toggleNotesPanel:function(){this.$("#notesListPanelOverlay").is(":hidden")?($("#notesListPanelOverlay").show(),this.hideIframe(),this.$("#btnNotes").addClass("selected"),this.setNotesWapperDimentions(),this.setNoteContentHeight(),$("#notesHeader").focus(),ClientInformation.isMobileDevice()&&$("#notesScroller").css("overflow-y","scroll"),this.hideTranscript()):(this.hideNotes(),this.$("#btnNotes").focus())},hideNotes:function(){$("#notesListPanelOverlay").hide(),this.$("#btnNotes").removeClass("selected"),this.showIframe()},saveNotesInCookie:function(){var a=[];$(".noteDisply").each(function(b){a.push($(this).html()),((b+1)%5==0||b+1==$(".noteDisply").length)&&($.cookie(window.location.pathname+b,JSON.stringify(a),{expires:365,path:"/"}),a=[])}),this.$("#notesSaveFeedBack").removeClass("hidden");var b=this.$("#notesSaveFeedBack");$.colorbox($.extend({},colorBoxConfiguration,{href:b,onComplete:onModalComplete,onCleanup:onModalCleanUp,onClosed:function(){onModalClose(),$("#notesSaveFeedBack").addClass("hidden"),$("#notesSaveButton").focus()}}))},scrollNotes:function(a){var b=$(a).offset().top,c=this.notesScroller,d=c.getScrollTop();setTimeout(function(){c.doScroll(d+b-10)},1e3)},noteClickHandler:function(a){player.hideAllTextAreas();var b=$(a.currentTarget).html(),c=$(a.currentTarget).attr("id").replace("display",""),d="#"+$(a.currentTarget).attr("id").replace("display","edit");$(d).show(),$(d).val(b),$(d).height($(a.currentTarget).height()),$(a.currentTarget).html("").hide(),this.updateNotesScroll(),$(d).focus(),$("tr").removeClass("active"),$("#screen"+c).addClass("active"),$("#notesSelector").attr("value",c),$("#notesSelector").css("color","#000000")},textareaFocusOutHandler:function(a){var b=$(a.currentTarget).val(),c="#"+$(a.currentTarget).attr("id").replace("edit","display");$(c).show().html(b),$("#notesTable").height($("#notesGrid").height()>$("#notesScroller").height()?$("#notesGrid").height():$("#notesScroller").height()),$(c).focus(),$(a.currentTarget).hide(),this.updateNotesScroll()},textareaKeydownHandler:function(a){var b="#"+$(a.currentTarget).attr("id").replace("edit","display");$(b).html($(a.currentTarget).val());var c=!1;$(a.currentTarget).height()!=$(b).height()&&(c=!0);var d=a.keyCode?a.keyCode:a.which;$(a.currentTarget).height(13==d?$(b).height()+25:$(b).height()),c&&this.updateNotesScroll()},renderNotes:function(a){for(var b=this.getPlayerManager().getPages(),c=[],d=0;d<b.length;d++)$.cookie(window.location.pathname+d)&&$(JSON.parse($.cookie(window.location.pathname+d))).each(function(){c.push(this.toString())});null!=$.cookie(window.location.pathname)&&(c=JSON.parse($.cookie(window.location.pathname))),$("#notesHeader").attr("tabindex",a++),$("#notesSelector").attr("tabindex",a++),$("#notesPrintButton").attr("tabindex",a++),$("#notesSaveButton").attr("tabindex",a++),$("#btnClosenotesPanel").attr("tabindex",a++),$("#notesSaveButton").bind("click",this.saveNotesInCookie),$("#btnClosenotesPanel").bind("click",this.toggleNotesPanel),$("#btnClosesummaryPanel").bind("click",this.toggleSummaryScreenPanel),$("#notesPrintButton").bind("click",this.showPrintPage),ClientInformation.isMobileDevice()?$("#notesSelector").css("margin-top","3px"):this.$("#notesGrid").find("textarea").live("mousedownoutside keydownoutside",this.textareaFocusOutHandler),this.$(".noteDisply").find("div").enterEnabled(),$("#notesSelector").click(function(a){$(a.currentTarget).focus()}),$(b).each(function(a){var d=$('<tr id="screen'+(a+1)+'"></tr>'),e=$('<td class="screenNoColumn"> <span rel="localize[screen]">Screen</span> '+(a+1)+"</td>");$(d).append(e);var f=b.getPageForIndex(a).get("formattedTitle"),g=$('<td class="screenTitleColumn">'+f+"</td>"),h=$('<option title="'+f+'" id="noteMenuItem'+(a+1)+'" value="'+(a+1)+'" class="noteMenuItem">'+(a+1)+". "+f+"</option>");$("#notesSelector").append(h),$(d).append(g);var i=$('<td class="noteContentColumn"></td>'),j=$('<div id="display'+(a+1)+'" class="noteDisply"></div>');null!=c[a]&&$(j).html(c[a]);var k=$('<textarea id="edit'+(a+1)+'" class="noteEdit"></textarea>');$(i).append(k),$(i).append(j),$(d).append(i),$("#notesBody").append(d)});return this.$(".noteDisply").bind("click enter",this.noteClickHandler),this.$(".noteEdit").bind("focusout",this.textareaFocusOutHandler),this.$(".noteEdit").bind("keydown",this.textareaKeydownHandler),this.$(".noteEdit").hide(),this.$(".noteDisply").enterEnabled(),this.$("#notesHead").attr("tabindex",a++),this.$("#notesHead").find("th").each(function(){$(this).attr("tabindex",a++)}),ClientInformation.isMobileDevice()||(this.$("#notesGrid").find("tbody").attr("tabindex",a++),this.$("#notesGrid").find("td").each(function(){$(this).children().length?($(this).find("div").attr("tabindex",a++),$(this).find("textarea").attr("tabindex",a++)):$(this).attr("tabindex",a++)})),a},highlightRegardingNote:function(){$("#notesSelector").focus();var a=$("#notesSelector").attr("value");0==a?$("#notesSelector").css("color","#808080"):$("#notesSelector").css("color","#000000"),$("tr").removeClass("active"),$("#screen"+a).addClass("active"),displayNote=$("#screen"+a).find(".noteDisply"),editNote=$("#screen"+a).find(".noteEdit"),$(editNote).show(),$(editNote).val(""==$.trim($(displayNote).html())?"":$(displayNote).html()),$(displayNote).hide(),$(editNote).focus()},setNoteContentHeight:function(){$("#notesGrid tr").each(function(){var a=$(this).find(".screenTitleColumn").height();$(this).find(".noteDisply").css("min-height",a)})},hideAllTextAreas:function(){$(".noteEdit").each(function(){if(!$(this).is(":hidden")){var a=$(this).val();$("#"+$(this).attr("id").replace("edit","display")).show().html(a),$(this).hide()}})},setNotesWapperDimentions:function(){$("#notesListPanelOverlay").height($("#playerContainer").hasClass("removeCopyRight")?$("#currentPageContainer").height()+$("#titleContainer").height()-20:$("#currentPageContainer").height()+$("#titleContainer").height()),$("#notesListPanelOverlay").width($("#currentPageContainer").width()),$("#notesScroller").height($("#notesListPanelOverlay").height()-($("#notesHeaderContainer").height()+$("#notesHead").height()+4)),this.updateNotesScroll()},updateNotesScroll:function(){if($("#notesGrid").height()>$("#notesScroller").height()?($("#notesTable").height($("#notesGrid").height()),ClientInformation.isMobileDevice()||$("#notesHead").find("thead").addClass("scroll")):($("#notesTable").height($("#notesScroller").height()),ClientInformation.isMobileDevice()||$("#notesHead").find("thead").removeClass("scroll")),ClientInformation.isMobileDevice()&&this.notesScroller){var a=this.notesScroller;setTimeout(function(){a.resize()},0)}},showVolumeControl:function(){this.$("#volumeControlPanel").is(":hidden")||this.$("#volumeControlPanelOverlay").is(":hidden")?(this.hideAllPoppedElements(),this.$("#volumeControlPanel").show(),this.$("#volumeControlPanelOverlay").show(),this.$("#btnVolume").addClass("selected")):this.hideAllPoppedElements()},hideVolumeControl:function(){this.$("#volumeControlPanel").hide(),this.$("#volumeControlPanelOverlay").hide(),this.$("#btnVolume").removeClass("selected")},hideAllPoppedElements:function(){this.hideMenu(),this.hideVolumeControl(),this.hideNotes(),this.hideSummaryScreen()},onCurrentPageLoad:function(){if(this.$("#pageLoader").attr("src")){setTimeout(function(){window.history.forward()},0);var a=this.$("#pageLoader")[0];if(isDownloadePackage===!1){ClientInformation.isMobileDevice()&&a.contentWindow.$("body")[0].addEventListener("touchmove",function(a){a.preventDefault()},!1);var b=a.contentWindow;window.sessionInfo=this.getPlayerManager().getCurrentPage().get("topicXMLURL").split("?")[1],b.loadPageData(this.getPlayerManager().getCurrentPage().get("topicXMLURL"),this.getPlayerManager().getCurrentPage().get("assetReferenceXMLURL"),this.getConfigurationFileURL()),window.updateTheme()}else{var c="setData$$";c+=this.getPlayerManager().getCurrentPage().get("topicXMLURL")+"$$",c+=this.getPlayerManager().getCurrentPage().get("assetReferenceXMLURL")+"$$",c+=this.getConfigurationFileURL(),this.postmessageToTemplate(c),window.updateTheme()}$("#learningObjectiveTitle").html(""),isLMSSupported&&(this.getPlayerManager().getPages().isLastPage(this.getPlayerManager().getCurrentPage())?LMSCommunicator.setLessonStatus(LMSLessonStatus.COMPLETE):LMSCommunicator.getLessonStatus()!=LMSLessonStatus.COMPLETE&&LMSCommunicator.setLessonStatus(LMSLessonStatus.INCOMPLETE),LMSCommunicator.setLessonLocation(this.getPlayerManager().getPages().getPageIndexFor(this.getPlayerManager().getCurrentPage())),this.getPlayerManager().getIsInAssessmentMode()&&this.getPlayerManager().getCurrentPage().get("isAssessmentType")&&a.contentWindow.postMessage("assesment","*"));var d=playerManager.getTheme().getName();a.contentWindow.postMessage("theme$$"+d,"*"),a.contentWindow.postMessage("maxtries$$"+maxtries,"*")}},postmessageToTemplate:function(a){this.$("#pageLoader")[0].contentWindow.postMessage(a,"*")},onCurrentPageDataLoaded:function(){{var a=$("#pageLoader")[0];a.contentWindow.dataObject}this.setSummaryAudio(a.contentWindow.getSummaryAudio());window.isFirstRun||a.contentWindow.focusFirstTabindexItem(),this.getPlayerManager().getIsInAssessmentMode()&&a.contentWindow.changeToAssessmentMode(),window.isFirstRun=!1},setSummaryAudio:function(a){a&&a.hasMedia?(this.$("#summaryAudio").data("isReady")?(this.$("#summaryAudio").jPlayer("setMedia",{mp3:a.urls.mp3.match("^http://")?a.urls.mp3:"templates/templateName/"+a.urls.mp3}),ClientInformation.isMobileDevice()||setTimeout(function(){},0)):this.$("#summaryAudio").bind($.jPlayer.event.ready,{context:this.$("#summaryAudio")},function(b){$(b.data.context).jPlayer("setMedia",{mp3:a.urls.mp3.match("^http://")?a.urls.mp3:"templates/templateName/"+a.urls.mp3}),ClientInformation.isMobileDevice()||setTimeout(function(){},0)}),this.$("#btnVolume").button("enable"),this.$("#summaryAudioContainer .jp-play").button("enable"),this.$("#btnTranscript").button("enable"),this.$("#transcriptPanel #transcript").html(a.alternateText?a.alternateText:"<p>No audio transcript available</p>"),this.$("#summaryAudioContainer").css("visibility","visible"),this.$("#volumeWrapper").css("visibility","visible"),this.$("#transcriptWrapper").css("visibility","visible"),this.$("#transcriptPanel").css("visibility","visible")):(this.$("#summaryAudioContainer").css("visibility","hidden"),this.$("#volumeWrapper").css("visibility","hidden"),this.$("#transcriptWrapper").css("visibility","hidden"),this.$("#transcriptPanel").css("visibility","hidden"))},resetPlayerForNewPage:function(){if(this.hideAllPoppedElements(),window.printPreviewWindow){try{window.printPreviewWindow.close()}catch(a){}window.printPreviewWindow=null}if(this.$("#pageLoader")[0]){this.$("#pageLoader")[0].contentWindow}this.$("#summaryAudio").jPlayer("clearMedia"),this.$("#btnVolume").button("disable"),this.$("#summaryAudioContainer .jp-play").button("disable"),this.$("#transcriptPanel #transcript").html("Loading..."),isLMSSupported&&this.updateCurrentScoreForPackage(),clearInterval(window.time),this.$("#pageLoader").unbind(),this.$("#pageLoader").remove();var b;b=$($("html").is(".ie7")?'<iframe id="pageLoader" frameborder="0" style="width:'+$(window).width()+'px;" height="100%" scrolling="no"></iframe>':'<iframe id="pageLoader" frameborder="0" width="100%" height="100%" scrolling="no"></iframe>'),this.$("#currentPageWrapper").append(b),this.$(b).bind("load",this.onCurrentPageLoad)},resizePageLoaderToFit:function(){this.$("#pageLoader").height(this.$(window).height()-this.$("#titleContainer").height()-this.$("#toolBarContainer").height()),this.setNotesWapperDimentions(),this.setSummaryWapperDimentions()},resizePageLoaderToContent:function(){var a,b=$("#currentPageWrapper")[0],c=this;a=$("#titleContainer").height(),$("#currentPageContainer").css("top",a),$("#timerwrapper").css("top",a),c.postmessageToTemplate("setPageHeight$$"+$(b).height(),"*")},onVolumeControlChange:function(a,b){this.$("#summaryAudio").jPlayer("option","volume",b.value)},toggleSummaryAudioVolume:function(a){var b=$(a.target).is(":checked"),c=this.$("#summaryAudio"),d=this.$("#btnVolume"),e=this.$("#volumeControl");b?($(c).jPlayer("mute"),$(e).slider("disable"),$(d).addClass("muted")):($(c).jPlayer("unmute"),$(e).slider("enable"),$(d).removeClass("muted"))},onPlayerUnload:function(){if(isLMSSupported){var a=this.$("#pageLoader").get(0);if(this.getPlayerManager().getIsInAssessmentMode()&&a.contentWindow.getAssessmentScore){var b=a.contentWindow.getAssessmentScore();b>=0&&(this.getPlayerManager().getCurrentPage().get("isAssessmentType")&&this.updateCurrentScoreForPackage(),LMSCommunicator.setLessonLocation(this.getPlayerManager().getPages().getPageIndexFor(this.getPlayerManager().getCurrentPage())+1))}LMSCommunicator.finish()}},onPageMediaPlay:function(){$("#summaryAudio").jPlayer("pause")},stopAudioOnTabPress:function(){$("#summaryAudio").jPlayer("stop")},onSummaryAudioPlay:function(){this.postmessageToTemplate("pauseAllMedia$$","*")},onSummaryAudioPlayerError:function(){window.console},onPlayerTitleBlur:function(){$("#learningObjectiveTitle").makeFocusOutDirectionEnabled(),$("#learningObjectiveTitle").bind("blur",function(a){$(a.target).focusOutDirection()>0?$("#pageLoader")[0].contentWindow.focusFirstTabindexItem():$("#btnHelp").focus()})},onFirstLinkBlur:function(){$("#toolBarWrapper button:first").bind("blur",function(a){$(a.target).focusOutDirection()<0&&$("#pageLoader")[0].contentWindow.focusLastTabindexItem()})},onFirstContentWindowItemShiftTab:function(){$("#learningObjectiveTitle").focus()},onLastContentWindowItemTab:function(){$("#btnPageList").focus()},showPrintPage:function(a){"btnPrintPage"==$(a.currentTarget).attr("id")?(this.hideAllPoppedElements(),this.postmessageToTemplate("printData")):this.showPrintPageHtml(this.returnPrintPageObj())},showPrintPageHtml:function(a){if(window.printPreviewWindow){try{window.printPreviewWindow.close()}catch(b){}window.printPreviewWindow=null}window.printPreviewWindow||(window.printMarkup=a,window.printPreviewWindow=window.open("print.html?locale="+window.locale,"printWindow","scrollbars=1, height=600, width=800"),setTimeout(function(){try{window.printPreviewWindow.postMessage(a,"*")}catch(b){}},400))},returnPrintPageObj:function(){var a=$("<div></div>"),b=$("<table class='notesPrint' border='1'><tr><td colspan='3'><span rel='localize[notes]'>Notes</span></td></tr></table>"),c=$("<tr style='font-weight:bold;'></tr>");return $("#notesHead thead").find("th").each(function(){$(c).append("<td>"+$(this).html()+"</td>")}),$(b).append(c),$("#notesGrid tbody").find("tr").each(function(){var a=$("<tr></tr>");$(this).find("td").each(function(){$(a).append("<td>"+$(this).html()+"</td>")}),$(b).append(a)}),$(a).append(b),$(a).html()},hideBugToolBox:function(){var a=$("#pageLoader")[0].contentWindow.document;$(a).find("#commentContainerParent").hide()},hideBugsListPanel:function(){var a=$("#pageLoader")[0].contentWindow.document;$("#commentsContainer").hide(),$(a).find("#pageContainer .TypoError").hide(),$(a).find("#globalBugsContainer").hide(),$(a).find("#globalBugsContainer").css("left","2px")},showBugsToolBoxNPanel:function(){var a=$("#pageLoader")[0].contentWindow.document;$(a).find("#commentContainerParent").show(),window.toogleBugs(),$(a).find("#globalBugsContainer").show(),window.parent.playerMode!=PreviewModes.AUTHOR_PREVIEW_MODE&&$(a).find("#globalBugsContainer").css("left","62px"),$("#commentsContainer").show()},resizePlayer:function(a,b){0!=b?$(window).width()<a?(window.resizeTo(a,$(window).height()),$("#currentPageContainer").css("margin-left",0)):($("#currentPageContainer").css("margin-left",($(window).width()-a)/2),$("#notesListPanelOverlay").css("left",($(window).width()-a)/2+"px")):($("#currentPageContainer").css("margin-left",0),$("#notesListPanelOverlay").css("left",0)),$($("#pageLoader")[0]).width(a),$("#notesListPanelOverlay").width(a),$("#currentPageContainer").width(a)},resizeWindowByValue:function(){var a=$(this+":selected").val(),b=($("#pageLoader")[0].contentWindow,$("#pageLoader")[0]);switch(parseInt(a)){case 0:window.dropDownMode="",this.resizePlayer("100%",0),this.hideBugToolBox(),this.hideBugsListPanel();break;case 1:window.dropDownMode="",this.resizePlayer(768,1),this.$("#toolBarWrapper").removeClass(),this.$("#toolBarWrapper").addClass("ipadPotriat"),this.hideBugToolBox(),this.hideBugsListPanel();break;case 2:window.dropDownMode="",this.resizePlayer(1024,2),this.$("#toolBarWrapper").removeClass(),this.$("#toolBarWrapper").addClass("ipadLandscape"),this.hideBugToolBox(),this.hideBugsListPanel();break;case 4:window.dropDownMode="",this.resizePlayer(1024,3),this.$("#toolBarWrapper").removeClass(),this.$("#toolBarWrapper").addClass("ipadLandscape"),this.hideBugToolBox(),this.hideBugsListPanel();break;case 3:window.dropDownMode="",this.resizePlayer(1280,4),this.hideBugToolBox(),this.hideBugsListPanel();break;case 5:window.dropDownMode="bugsVisible",currentView=$("#activityResultsContainer"),this.showBugsToolBoxNPanel(),this.$("#toolBarWrapper").removeClass(),this.$("#toolBarWrapper").addClass("bugsMode"),$("#currentPageContainer").css("margin-left",0),$("#notesListPanelOverlay").css("left",0),$(window).trigger("resize");break;case 6:window.dropDownMode="bugsVisible",this.showBugsToolBoxNPanel(),this.hideBugToolBox(),this.$("#toolBarWrapper").removeClass(),this.$("#toolBarWrapper").addClass("bugsMode"),$("#currentPageContainer").css("margin-left",0),$("#notesListPanelOverlay").css("left",0),$(window).trigger("resize")}b.contentWindow&&b.contentWindow.setPageHeight&&b.contentWindow.setPageHeight($(b).height())},changeToAssessmentMode:function(){this.$("#pageListWrapper").remove(),this.$("#btnPreviousPage").button("disable"),this.getPlayerManager()&&this.getPlayerManager().getPages()&&isLMSSupported&&this.updateScoreThresholdsForPackage(this.getPlayerManager().getPages())},updateScoreThresholdsForPackage:function(a){var b=0;a.each(function(a){a.get("isAssessmentType")&&b++}),LMSCommunicator.setMinimumScore(0),LMSCommunicator.setMaximumScore(b)},showMultiColIconFun:function(){var a=this.getPlayerManager().getPageStyles();if(a.length>0){var b=a[0].path;this.$("#pageLoader")[0].contentWindow.$("head").append('<link  type="text/css" rel="stylesheet" href="'+b+'" />')}this.$("#columnView").show()},disableThePlayerButton:function(a){$(a).button("disable")},enableThePlayerButton:function(a){$(a).button("enable")},updateCurrentScoreForPackage:function(){var a=this.$("#pageLoader").get(0);if(this.getPlayerManager().getIsInAssessmentMode())try{if(a.contentWindow.getAssessmentScore){var b=LMSCommunicator.getScore(),c=a.contentWindow.getAssessmentScore();if(c>=0){var d=(LMSCommunicator.getMaximumScore(),0);d=0>b?c:b+c,LMSCommunicator.setScore(d)}}}catch(e){}},toggleSummaryScreenPanel:function(){this.$("#summaryListPanelOverlay").is(":hidden")?($("#btnsummary").addClass("selected"),this.hideAllPoppedElements(),$("#summaryListPanelOverlay").show(),this.hideIframe(),this.setSummaryWapperDimentions(),(new dataStoringForScorm).showSummaryScreen(),this.hideTranscript()):(this.hideSummaryScreen(),$("#btnsummary").removeClass("selected"),this.$("#btnsummary").focus())},hideSummaryScreen:function(){this.$("#summaryListPanelOverlay").hide(),this.showIframe()},setSummaryWapperDimentions:function(){$("#summaryListPanelOverlay").height($("#currentPageContainer").height()+$("#titleContainer").height()),$("#summaryListPanelOverlay").width($("#currentPageContainer").width()),$("#summaryScroller").height($("#summaryListPanelOverlay").height()-$("#summaryHeaderContainer").height())}});